// „ÉÄ„É≥„Ç∏„Éß„É≥„Ç≤„Éº„É†
// https://www.youtube.com/watch?v=LtkTBJadWCc&feature=youtu.be
// 1.54Áßí„ÅÆÊâÄ„Åß„ÄÅ‰∏≠Êñ≠„ÄÇcanvas„ÅÆË°®Á§∫„ÅÆ‰ªïÊñπ„Åå„Çà„Åè„Çè„Åã„Çâ„Å™„ÅÑ„ÅÆ„Åß„ÄÅ„Åæ„Åö„ÅØcanvas„ÇíÁêÜËß£„Åô„Çã„ÄÇ
"use strict";

{
  class Level {
    constructor() {
      this.tiles = [
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        0,
        0,
        0,
        0,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        0,
        0,
        0,
        0,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        0,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        0,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        0,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        0,
        0,
        0,
        0,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        0,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        0,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
        1,
      ];
      this.lenX = 20;
      this.lenY = 10;
    }
    tileAt(x, y) {
      if (x < 0 || x >= this.lenX || y < 0 || this.lenY) return 1;
      return this.tiles[y * this.lenX + x];
    }
  }

  // „Éó„É¨„Ç§„É§„Éº„ÇÑÊïµ„Ç≠„É£„É©Á≠â„ÇíË°®„Åô„ÇØ„É©„Çπ
  class Actor {
    constructor(x, y, image) {
      this.x = x;
      this.y = y;
      this.image = image;
    }
  }

  // „Ç≤„Éº„É†„ÅÆÁä∂ÊÖã„Çí„Åæ„Å®„ÇÅ„Çã„ÇØ„É©„Çπ
  class Game {
    constructor() {
      this.level = new Level();
      this.player = null;
      this.actors = [];
    }
  }
  let game;

  function setup() {
    // „Ç≤„Éº„É†„ÅÆÁä∂ÊÖã„ÇíÂàùÊúüÂåñ
    game = new Game();

    let player = new Actor(3, 2, "üê•");
    game.player = player;
    game.actors = [player];

    // „Ç≠„É£„É≥„Éê„Çπ„Çí‰Ωú„Çã
    createCanvas(480, 480);

    function draw() {
      // „Ç≠„É£„É≥„Éê„Çπ„ÇíËÉåÊôØËâ≤„ÅßÂ°ó„Çä„Å§„Å∂„Åô
      background(240);
      // „É¨„Éô„É´Ôºà„ÉÄ„É≥„Ç∏„Éß„É≥„ÅÆ1ÈöéÂ±§Ôºâ„ÇíÊèèÁîª
      textAlign(LEFT, TOP);
      let w = 60;
      textSize(w);
      for (let y = 0; y < 10; y++) {
        for (let x = 0; x < 20; x++) {
          let t = game.level.tileAt(x, y);
          if (t === 1) {
            text("üå≥", w * x, w * y);
          }
        }
      }

      // „Ç¢„ÇØ„Çø„ÉºÔºà‰∏ª‰∫∫ÂÖ¨„ÇÑÊïµ„Ç≠„É£„É©Á≠â„ÇíÊèèÁîªÔºâ
      for (let actor of game.actors) {
        text(actor.image, w * actor.x, w * actor.y);
      }
    }
  }
}
